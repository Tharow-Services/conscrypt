{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "31648d85_89b9ea6b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2024-09-04T15:25:48Z",
      "side": 1,
      "message": "I think we\u0027re going in the wrong direction here, my apologies if my lack of attention has wasted time for you.\n\nI _thought_ that package-private APIs in mainline modules were inaccessible from CTS tests, although that\u0027s based on my experience trying to run the tests in openjdk/ from CtsLibcoreTestCases.  But unless I\u0027m missing something, I can\u0027t see any difference in the way these new private tests are configured.\n\nSo if there\u0027s a piece of config I have missed, let\u0027s add it to CtsLibcoreTestCases (and also add the openjdk/ tests!)",
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "199e26be_30416af3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-09-10T03:20:10Z",
      "side": 1,
      "message": "Sorry, I should have shared a bit more of the context.\n\nSo the key difference with this new test module is that it is *not* for CTS.\n\nYou can see it as a low-level, unittest suite for conscrypt. It has access to the private api, and can exercise more edge cases.\n\nIt is complementary to CTS (and we should eventually have a more end-to-end test for CT in CTS), but as you mentioned, CTS should rely on the public API (the API we don\u0027t expect to change).\n\nThe reason that it is not in CTS, is because it\u0027s not testing the *compatibility* of a device for the platform, but simply testing the platform code itself.\n\nIt can still be executed in presubmit (only on ToT, as to avoid any API misalignment between the library and the tests).\n\nI will also remove the @NonCts annotation that I added recently, as it doesn\u0027t make sense for these private tests.",
      "parentUuid": "31648d85_89b9ea6b",
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ceed578c_48396247",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2024-09-10T11:53:17Z",
      "side": 1,
      "message": "Got it... I think I understand now, this works because you\u0027re including the Conscrypt classes in your test, so it avoids the error caused by trying to link methods not in the public API from the boot classloader. \n\nI feel a bit silly I didn\u0027t think of this trick sooner, but if it works let\u0027s use it to run all the tests under openjdk/src/test/java which currently don\u0027t get run on Android. I suspect there will be failures initially because they have _never_ been run on Android.\n\nAnd if we can figure a way to get this included in our coverage stats it will *significantly* move the needle, especially NativeCryptoTest.\n\nLet\u0027s do it in multiple stages.  Get this merged and running (bonus points for presubmit).  Then extend.  Then collect coverage.",
      "parentUuid": "199e26be_30416af3",
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3369c173_21ba037d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2024-09-10T14:20:37Z",
      "side": 1,
      "message": "\u003e And if we can figure a way to get this included in our coverage stats it will *significantly* move the needle, especially NativeCryptoTest.\n\nThinking about it, unless we can also load libjavacrypto then the Native* tests won\u0027t run.",
      "parentUuid": "ceed578c_48396247",
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7e1136e_30a150f1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-09-11T07:43:45Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "3369c173_21ba037d",
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fb94ce64_16074b4c",
        "filename": "Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 756,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2024-09-10T11:53:17Z",
      "side": 1,
      "message": "I suspect this is a no-op... But if you move it to static_libs then it may save you including the non-test sources above.",
      "range": {
        "startLine": 756,
        "startChar": 0,
        "endLine": 756,
        "endChar": 20
      },
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bdf00588_fcfa7cb1",
        "filename": "Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 756,
      "author": {
        "id": 1561651
      },
      "writtenOn": "2024-09-11T07:43:45Z",
      "side": 1,
      "message": "Ack.",
      "parentUuid": "fb94ce64_16074b4c",
      "range": {
        "startLine": 756,
        "startChar": 0,
        "endLine": 756,
        "endChar": 20
      },
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c09352a1_0c793014",
        "filename": "Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 756,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2024-09-11T08:14:04Z",
      "side": 1,
      "message": "Discussed offline, my mistake ðŸ˜Š",
      "parentUuid": "bdf00588_fcfa7cb1",
      "range": {
        "startLine": 756,
        "startChar": 0,
        "endLine": 756,
        "endChar": 20
      },
      "revId": "1b202baa936c0c596cf8d1fdef3fe4b0aa067773",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}