{
  "comments": [
    {
      "key": {
        "uuid": "dfed10cb_b0b6f614",
        "filename": "src/main/java/org/conscrypt/OpenSSLKeyAgreement.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2014-05-27T17:10:37Z",
      "side": 1,
      "message": "I\u0027s safer to not keep a hard reference to the shared secret. How about generating the shared secret inside engineGenerateSecret and immediately returning, instead of storing it into a member field?",
      "revId": "47d230c5cf2d2b92b7a898d6ae8fcd5d8af4690a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf65bc2b_e8325b76",
        "filename": "src/main/java/org/conscrypt/OpenSSLKeyAgreement.java",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2014-05-27T17:10:37Z",
      "side": 1,
      "message": "NativeCrypto.EVP_PKEY_derive is not thread-safe: it invokes state-changing operations on the provided EVP_PKEY. I don\u0027t have any good ideas on how to fix this though other than invoking all NativeCrypto.EVP_PKEY_derive serially.",
      "revId": "47d230c5cf2d2b92b7a898d6ae8fcd5d8af4690a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ff71899_2b2739da",
        "filename": "src/main/java/org/conscrypt/OpenSSLKeyAgreement.java",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2014-05-27T17:10:37Z",
      "side": 1,
      "message": "Looks like NativeCrypto.EVPK_PKEY_derivce can throw a checked exception, but that type of exceptions is not caught and rethrown here.",
      "range": {
        "startLine": 61,
        "startChar": 35,
        "endLine": 61,
        "endChar": 50
      },
      "revId": "47d230c5cf2d2b92b7a898d6ae8fcd5d8af4690a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ffd0472_982ddd86",
        "filename": "src/main/java/org/conscrypt/OpenSSLKeyAgreement.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2014-05-27T17:10:37Z",
      "side": 1,
      "message": "Since you\u0027re reusing mResult across invocations of engineGenerateSecret, please return a copy here to prevent issues when somebody modifies the contents of the array returned by KeyAgreement.generateSecret. Better yet, avoid storing the shared secret in a member field (see my comment above on line 42).",
      "revId": "47d230c5cf2d2b92b7a898d6ae8fcd5d8af4690a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ffd0472_98179d5d",
        "filename": "src/main/java/org/conscrypt/OpenSSLKeyAgreement.java",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2014-05-27T17:10:37Z",
      "side": 1,
      "message": "This method should also reset mResult. I guess we should add a CTS test for that. If generateSecret succeeds, and is followed by init, then the following generateSecret should fail. This is according to the RI\u0027s Javadoc and current behavior.",
      "range": {
        "startLine": 95,
        "startChar": 19,
        "endLine": 95,
        "endChar": 29
      },
      "revId": "47d230c5cf2d2b92b7a898d6ae8fcd5d8af4690a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ff71899_ab84c94c",
        "filename": "src/main/native/org_conscrypt_NativeCrypto.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1905,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2014-05-27T17:10:37Z",
      "side": 1,
      "message": "Nit: It\u0027s probably not an error is the second EVP_PKEY_derive uses less storage than planned.",
      "revId": "47d230c5cf2d2b92b7a898d6ae8fcd5d8af4690a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}