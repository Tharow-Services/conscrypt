{
  "comments": [
    {
      "key": {
        "uuid": "cc1d4752_49356cfc",
        "filename": "openjdk/src/test/java/org/conscrypt/PlatformTest.java",
        "patchSetId": 2
      },
      "lineNbr": 191,
      "author": {
        "id": 1103203
      },
      "writtenOn": "2019-12-06T18:55:29Z",
      "side": 1,
      "message": "nit: I get that you\u0027re only integrating an upstream CL, but, what is this change trying to achieve? What\u0027s wrong with the previous assertEquals() code?\n\nIf it\u0027s trying to assertEquals on collections that might be Lists but where the order doesn\u0027t matter, then\n\nassertEquals(new HashSet\u003c\u003e(paramsIn.getSNIMatchers()),\n  new HashSet\u003c\u003e(paramsOut.getSNIMatchers()));\n\nwould still work and be a whole lot more readable. No?",
      "range": {
        "startLine": 184,
        "startChar": 4,
        "endLine": 191,
        "endChar": 0
      },
      "revId": "9191b9c66beda56938daabcb38042c4d1bd6ca6a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33a41d62_fa068390",
        "filename": "openjdk/src/test/java/org/conscrypt/PlatformTest.java",
        "patchSetId": 2
      },
      "lineNbr": 191,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2019-12-09T13:16:39Z",
      "side": 1,
      "message": "This was https://github.com/google/conscrypt/commit/ee327fcab0ff50147f6964bce99258d8e69e2586 and I should have noticed at the time.  Will rework it later.",
      "parentUuid": "cc1d4752_49356cfc",
      "range": {
        "startLine": 184,
        "startChar": 4,
        "endLine": 191,
        "endChar": 0
      },
      "revId": "9191b9c66beda56938daabcb38042c4d1bd6ca6a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b74f6767_7189ef3e",
        "filename": "openjdk/src/test/java/org/conscrypt/PlatformTest.java",
        "patchSetId": 2
      },
      "lineNbr": 191,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2019-12-09T15:11:58Z",
      "side": 1,
      "message": "Actually, comparing sets directly won\u0027t work as it masks duplicates.  \n\nWe actually declare theTruth as a dependency in build.gradle but don\u0027t use it anywhere (yet), so the best way forward might just be to start our own MoreAsserts class for this kind of thing and maybe consider a large-scale migration to Truth later.",
      "parentUuid": "33a41d62_fa068390",
      "range": {
        "startLine": 184,
        "startChar": 4,
        "endLine": 191,
        "endChar": 0
      },
      "revId": "9191b9c66beda56938daabcb38042c4d1bd6ca6a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "521e186d_6da4a6a1",
        "filename": "openjdk/src/test/java/org/conscrypt/PlatformTest.java",
        "patchSetId": 2
      },
      "lineNbr": 191,
      "author": {
        "id": 1103203
      },
      "writtenOn": "2019-12-09T17:22:41Z",
      "side": 1,
      "message": "\u003e Actually, comparing sets directly won\u0027t work as it masks duplicates.  \n\nThe code here also masks duplicates (as in, duplicates in either a or b are ignored).\n\nWould you want them to cause the test to fail?",
      "parentUuid": "b74f6767_7189ef3e",
      "range": {
        "startLine": 184,
        "startChar": 4,
        "endLine": 191,
        "endChar": 0
      },
      "revId": "9191b9c66beda56938daabcb38042c4d1bd6ca6a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30de155b_525998f2",
        "filename": "openjdk/src/test/java/org/conscrypt/PlatformTest.java",
        "patchSetId": 2
      },
      "lineNbr": 191,
      "author": {
        "id": 1334152
      },
      "writtenOn": "2019-12-09T18:13:46Z",
      "side": 1,
      "message": "Yup, it should be an error if there are dups.  Created https://github.com/google/conscrypt/pull/794 to address it.  Slight overkill but I didn\u0027t want to start migrating to Truth or pull in the Hamcrest libs.",
      "parentUuid": "521e186d_6da4a6a1",
      "range": {
        "startLine": 184,
        "startChar": 4,
        "endLine": 191,
        "endChar": 0
      },
      "revId": "9191b9c66beda56938daabcb38042c4d1bd6ca6a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09c08b4f_ddf2d0bc",
        "filename": "openjdk/src/test/java/org/conscrypt/PlatformTest.java",
        "patchSetId": 2
      },
      "lineNbr": 191,
      "author": {
        "id": 1103203
      },
      "writtenOn": "2019-12-09T21:50:48Z",
      "side": 1,
      "message": "\u003e Yup, it should be an error if there are dups.  Created\n\u003e https://github.com/google/conscrypt/pull/794 to address it.  \n\nThat code doesn\u0027t look like it errors on dupes? Also, in case of failure, in most cases one gets an error message that only contains the size of the collection which is not as helpful as the error message from:\n\nassertEquals(new HashSet\u003c\u003e(paramsIn.getSNIMatchers()), new HashSet\u003c\u003e(paramsIn.getSNIMatchers());\n\n\nIf you do want to enforce duplicates, then the following should work?\n\n assertEquals(sniMatcherSet(paramsIn), sniMatcherSet(paramsOut));\n\n\nprivate static\u003cT\u003e Set\u003cSNIMatcher\u003e sniMatcherSet(SSLParameters sslParameters) {\n  Collection\u003cSNIMatcher\u003e collection \u003d sslParameters.getSNIMatchers();\n  Set\u003cSNIMatcher\u003e result \u003d new HashSet\u003c\u003e(collection);\n  assertEquals(\"Should not have duplicates\", result.size(), collection.size());\n  return result;\n}\n\nThis seems vaguely appropriate given that SSLParameters.sniMatchers internally is a HashSet, anyway (but getSNIMatchers() makes a defensive copy into an unmodifiable List).\n\n\u003e Slight overkill but I didn\u0027t want to start migrating to Truth or pull in the Hamcrest libs.\n\nWhy not just use a simple local helper method like above? Can be understood without context (doesn\u0027t require anyone to learn what the semantics of assertContentsEqual are) and doesn\u0027t require everyone to get into the habit of looking into a separate test helpers class?",
      "parentUuid": "30de155b_525998f2",
      "range": {
        "startLine": 184,
        "startChar": 4,
        "endLine": 191,
        "endChar": 0
      },
      "revId": "9191b9c66beda56938daabcb38042c4d1bd6ca6a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}