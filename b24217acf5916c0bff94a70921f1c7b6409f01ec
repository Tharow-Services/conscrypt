{
  "comments": [
    {
      "key": {
        "uuid": "4b91cbcd_32e7f82e",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 341,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "I don\u0027t think this is right. What kind of problems were you running into?",
      "range": {
        "startLine": 341,
        "startChar": 19,
        "endLine": 341,
        "endChar": 43
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_e822cbd6",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 341,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "The problem is that grpc\u0027s okhttp transport attempts to access the session before the handshake has completed. We need some sort of session available at all times. Netty handles this differently and we could potentially port over some of there logic, but that seems like follow-on work.",
      "parentUuid": "4b91cbcd_32e7f82e",
      "range": {
        "startLine": 341,
        "startChar": 19,
        "endLine": 341,
        "endChar": 43
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b91cbcd_124f5caa",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 722,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "You\u0027re not guaranteed to have an array here. Need to check .hasArray() first.",
      "range": {
        "startLine": 722,
        "startChar": 61,
        "endLine": 722,
        "endChar": 72
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_e81beb92",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 722,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "IIUC, it will have an array. We\u0027ve already checked (in the calling method) to verify that the ByteBuffer is not read-only ... so if it\u0027s not direct, it must have an array. Or am I missing something?",
      "parentUuid": "4b91cbcd_124f5caa",
      "range": {
        "startLine": 722,
        "startChar": 61,
        "endLine": 722,
        "endChar": 72
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b91cbcd_9be6246d",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 722,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-11T18:56:44Z",
      "side": 1,
      "message": "Read-only and array-backed are orthogonal. For instance you could be passed some kind of ByteBuffer implementation that is a non-buffered streaming socket which reads from and writes to a device on-demand.\n\nI would agree that it\u0027d probably be slow, but I think you need a third path that does a .get(...) essentially since you can\u0027t guess what a developer will be doing.\n\nI did some searching around and found something similar in protobuf with a familiar TODO:\nhttps://github.com/google/protobuf/blob/master/java/core/src/main/java/com/google/protobuf/CodedInputStream.java#L144",
      "parentUuid": "2bc9f7ea_e81beb92",
      "range": {
        "startLine": 722,
        "startChar": 61,
        "endLine": 722,
        "endChar": 72
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b91cbcd_01f61672",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 722,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-16T15:28:57Z",
      "side": 1,
      "message": "Added a check for hasArray throughout and copy to a heap buffer when necessary.",
      "parentUuid": "4b91cbcd_9be6246d",
      "range": {
        "startLine": 722,
        "startChar": 61,
        "endLine": 722,
        "endChar": 72
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b91cbcd_b22868b9",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 752,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "Need to check .hasArray() first.",
      "range": {
        "startLine": 752,
        "startChar": 60,
        "endLine": 752,
        "endChar": 71
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_68109b6d",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 752,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "See previous reply.",
      "parentUuid": "4b91cbcd_b22868b9",
      "range": {
        "startLine": 752,
        "startChar": 60,
        "endLine": 752,
        "endChar": 71
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bf2d718_dd188b59",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 848,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "Need to check .hasArray() before calling this.",
      "range": {
        "startLine": 848,
        "startChar": 84,
        "endLine": 848,
        "endChar": 91
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_28efc345",
        "filename": "src/main/java/org/conscrypt/OpenSSLEngineImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 848,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "See previous reply.",
      "parentUuid": "2bf2d718_dd188b59",
      "range": {
        "startLine": 848,
        "startChar": 84,
        "endLine": 848,
        "endChar": 91
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b7aab69_1fe76f2e",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "I suppose this is just for a test? If so, it might be worth it to have a function where you can set this instead having it checked on class initialization.",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 29,
        "endChar": 81
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_e83e4bcf",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "I was trying to avoid adding new public interface methods, even if they were just for test. Once we prove that the new socket outperforms the old, we can just get rid of the old socket altogether.",
      "parentUuid": "4b7aab69_1fe76f2e",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 29,
        "endChar": 81
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b91cbcd_9b69c4d7",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-11T18:56:44Z",
      "side": 1,
      "message": "Ah, I see your intention now. However, in Android it\u0027s not really possible to set System properties from app start in such a way that you can guarantee they\u0027ll be set when this is read.",
      "parentUuid": "2bc9f7ea_e83e4bcf",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 29,
        "endChar": 81
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b5ca306_9e7c5d63",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 114,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "Debug statements to remove...",
      "range": {
        "startLine": 114,
        "startChar": 12,
        "endLine": 114,
        "endChar": 68
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_2859834a",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 114,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b5ca306_9e7c5d63",
      "range": {
        "startLine": 114,
        "startChar": 12,
        "endLine": 114,
        "endChar": 68
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b8e57b3_aca3ab54",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "Debug statements to remove...",
      "range": {
        "startLine": 121,
        "startChar": 12,
        "endLine": 121,
        "endChar": 67
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_c8438f5d",
        "filename": "src/main/java/org/conscrypt/OpenSSLSocketFactoryImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2b8e57b3_aca3ab54",
      "range": {
        "startLine": 121,
        "startChar": 12,
        "endLine": 121,
        "endChar": 67
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b612fbb_7d3a2f89",
        "filename": "src/main/java/org/conscrypt/SSLUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "Maybe these can come from generate_constants.cc as SSL3_RT_CHANGE_CIPHER_SPEC, et al.",
      "range": {
        "startLine": 45,
        "startChar": 27,
        "endLine": 45,
        "endChar": 62
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_28e7c32e",
        "filename": "src/main/java/org/conscrypt/SSLUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6b612fbb_7d3a2f89",
      "range": {
        "startLine": 45,
        "startChar": 27,
        "endLine": 45,
        "endChar": 62
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b612fbb_1d04d3c3",
        "filename": "src/main/java/org/conscrypt/SSLUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2016-11-10T22:53:36Z",
      "side": 1,
      "message": "generate_constants.cc as SSL3_RT_HEADER_LENGTH",
      "range": {
        "startLine": 65,
        "startChar": 19,
        "endLine": 65,
        "endChar": 43
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2bc9f7ea_68e1bb16",
        "filename": "src/main/java/org/conscrypt/SSLUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1125908
      },
      "writtenOn": "2016-11-11T01:32:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6b612fbb_1d04d3c3",
      "range": {
        "startLine": 65,
        "startChar": 19,
        "endLine": 65,
        "endChar": 43
      },
      "revId": "b24217acf5916c0bff94a70921f1c7b6409f01ec",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}